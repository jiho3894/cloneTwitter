{"version":3,"sources":["fbase.js","components/AccountForm.js","components/AuthForm.js","routes/Auth.js","components/Nweet.js","components/NweetFactory.js","routes/Home.js","components/Navigation.js","routes/Profile.js","components/Router.js","components/GlobalStyles.js","components/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseInstance","authService","auth","dbService","firestore","storageService","storage","AuthForm","useState","email","setEmail","password","setPassword","error","setError","onChange","useHistory","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","message","type","placeholder","required","signInWithEmailAndPassword","to","Body","styled","div","Container","Google","button","GitHub","Auth","onSocialClick","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","onClick","Nweet","nweetObj","isOwner","editing","setEditing","text","newNweet","setNewNweet","onDeleteClick","window","confirm","doc","id","delete","attachmentUrl","refFromURL","toggleEditing","prev","update","alt","src","width","height","NweetFactory","userObj","nweet","setNweet","attachment","setAttachment","attachmentRef","ref","child","uid","uuidv4","putString","response","getDownloadURL","createAt","Date","now","creatorId","collection","add","maxLength","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","currentTarget","readAsDataURL","Home","nweets","setNweets","useEffect","orderBy","onSnapshot","snapshot","nweetArray","docs","map","data","Navigation","displayName","Profile","refreshUser","newDisplayName","setNewDisplayName","history","updateProfile","signOut","push","RouterHandle","isLoggedIn","exact","path","component","AccountForm","GlobalStyles","createGlobalStyle","reset","body","App","init","setInit","setUserObj","onAuthStateChanged","user","args","currentUser","Boolean","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+NAcAA,IAASC,cATc,CACrBC,OAAQC,0CACRC,WAAYD,gCACZE,UAAWF,gBACXG,cAAeH,4BACfI,kBAAmBJ,eACnBK,MAAOL,8CAKF,I,YAAMM,EAAmBT,IACnBU,EAAcV,IAASW,OACvBC,EAAYZ,IAASa,YACrBC,EAAiBd,IAASe,U,OCiCxBC,EA/CE,WACf,MAA2BC,mBAAS,IAApC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA0BJ,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KAGMC,GAFUC,cAEC,SAACC,GAChB,MAAkCA,EAA3BC,OAAUC,EAAjB,EAAiBA,KAAMC,EAAvB,EAAuBA,MACX,UAATD,EACDT,EAASU,GACQ,aAATD,GACRP,EAAYQ,KAIVC,EAAQ,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,6DACfL,EAAMM,iBADS,kBAGPtB,EAAYuB,+BAA+Bf,EAAOE,GAH3C,sDAKbG,EAAS,KAAMW,SALF,wDAAH,sDASd,OACE,mCACE,uBAAMJ,SAAUA,EAAhB,UACE,uBACEF,KAAK,QACLO,KAAK,OACLC,YAAY,qBACZC,UAAQ,EAACR,MAAOX,EAChBM,SAAUA,IAEZ,uBACEI,KAAK,WACLO,KAAK,WACLC,YAAY,2BACZC,UAAQ,EAACR,MAAOT,EAChBI,SAAUA,IAEZ,uBAAOW,KAAK,SAASN,MAAM,6BAC1BP,EAAQ,uCAAW,SCWbN,EArDE,WACf,MAA2BC,mBAAS,IAApC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA0BJ,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KAGMC,GAFUC,cAEC,SAACC,GAChB,MAAkCA,EAA3BC,OAAUC,EAAjB,EAAiBA,KAAMC,EAAvB,EAAuBA,MACX,UAATD,EACDT,EAASU,GACQ,aAATD,GACRP,EAAYQ,KAIVC,EAAQ,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,6DACfL,EAAMM,iBADS,kBAIPtB,EAAY4B,2BAA2BpB,EAAOE,GAJvC,sDAMbG,EAAS,KAAMW,SANF,wDAAH,sDAcd,OACE,qCACE,uBAAMJ,SAAUA,EAAhB,UACE,uBACEF,KAAK,QACLO,KAAK,OACLC,YAAY,qBACZC,UAAQ,EAACR,MAAOX,EAChBM,SAAUA,IAEZ,uBACEI,KAAK,WACLO,KAAK,WACLC,YAAY,2BACZC,UAAQ,EAACR,MAAOT,EAChBI,SAAUA,IAEV,uBAAOW,KAAK,SAASN,MAAM,uBAC5BP,EAAQ,uCAAW,MAEtB,cAAC,IAAD,CAAMiB,GAAG,WAAT,0C,QCjDAC,EAAOC,IAAOC,IAAV,wIAQJC,EAAYF,IAAOC,IAAV,0LAUTE,EAASH,IAAOI,OAAV,0TAYNC,EAASL,IAAOI,OAAV,kTAsCGE,EA1BF,WACX,IAAMC,EAAa,uCAAG,WAAOtB,GAAP,iBAAAK,EAAA,4DAGR,YAFKH,EAAUF,EAApBC,OAAUC,MAGfqB,EAAW,IAAIxC,EAAiBE,KAAKuC,mBACpB,WAATtB,IACRqB,EAAW,IAAIxC,EAAiBE,KAAKwC,oBANnB,SAQdzC,EAAY0C,gBAAgBH,GARd,2CAAH,sDAWnB,OACE,cAACT,EAAD,UACE,eAACG,EAAD,WACE,cAAC,EAAD,IACA,gCACI,cAACC,EAAD,CAAQS,QAASL,EAAepB,KAAK,WACrC,cAACkB,EAAD,CAAQO,QAASL,EAAepB,KAAK,oB,QCGlC0B,EAjED,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QACzB,EAA8BvC,oBAAS,GAAvC,mBAAOwC,EAAP,KAAgBC,EAAhB,KACA,EAAgCzC,mBAASsC,EAASI,MAAlD,mBAAOC,EAAP,KAAiBC,EAAjB,KAEMC,EAAa,uCAAG,sBAAA/B,EAAA,0DACTgC,OAAOC,QAAQ,qDADN,gCAGZpD,EAAUqD,IAAV,gBAAuBV,EAASW,KAAMC,SAH1B,UAIY,KAA3BZ,EAASa,cAJM,gCAKVtD,EAAeuD,WAAWd,EAASa,eAAeD,SALxC,2CAAH,qDAUbG,EAAgB,kBAAMZ,GAAW,SAACa,GAAD,OAAWA,MAE5CzC,EAAQ,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,6DACfL,EAAMM,iBADS,SAETpB,EAAUqD,IAAV,gBAAuBV,EAASW,KAAMM,OAAO,CACjDb,KAAMC,IAHO,OAKfF,GAAW,GALI,2CAAH,sDAad,OACE,8BACGD,EACC,mCACGD,GACD,qCACE,uBAAM1B,SAAUA,EAAhB,UACE,uBACEK,KAAK,OACLC,YAAY,kBACZP,MAAO+B,EACPvB,UAAQ,EACRb,SAjBG,SAACE,GAChB,IAAiBG,EAAYH,EAAtBC,OAAUE,MACjBgC,EAAYhC,MAiBF,uBAAOM,KAAK,SAASN,MAAM,oBAE7B,wBAAQwB,QAASiB,EAAjB,yBAKJ,qCACE,6BAAKf,EAASI,OACbJ,EAASa,eAAiB,qBAAKK,IAAI,GAAGC,IAAKnB,EAASa,cAAeO,MAAM,OAAOC,OAAO,SACvFpB,GACC,qCACE,wBAAQH,QAASS,EAAjB,0BACA,wBAAQT,QAASiB,EAAjB,iC,QCQCO,EA/DM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,EAA0B7D,mBAAS,IAAnC,mBAAO8D,EAAP,KAAcC,EAAd,KACA,EAAoC/D,mBAAS,IAA7C,mBAAOgE,EAAP,KAAmBC,EAAnB,KAEMpD,EAAQ,uCAAG,WAAOJ,GAAP,qBAAAK,EAAA,yDACfL,EAAMM,iBACFoC,EAAgB,GACF,KAAfa,EAHY,wBAIPE,EAAgBrE,EAAesE,MAAMC,MAArB,UAA8BP,EAAQQ,IAAtC,YAA6CC,gBAJtD,SAKUJ,EAAcK,UAAUP,EAAY,YAL9C,cAKPQ,EALO,gBAMSA,EAASL,IAAIM,iBANtB,OAMbtB,EANa,sBAQXb,EAAW,CACfI,KAAMoB,EACNY,SAAUC,KAAKC,MACfC,UAAWhB,EAAQQ,IACnBlB,iBAZe,UAcXxD,EAAUmF,WAAW,SAASC,IAAIzC,GAdvB,QAejByB,EAAS,IACTE,EAAc,IAhBG,4CAAH,sDAuCd,OACE,uBAAMpD,SAAUA,EAAhB,UACE,uBACED,MAAOkD,EACPvD,SAxBW,SAACE,GAChB,IAAiBG,EAAYH,EAAtBC,OAAUE,MACjBmD,EAASnD,IAuBLM,KAAK,OACLC,YAAY,uBACZ6D,UAAW,MAEb,uBAAO9D,KAAK,OAAO+D,OAAO,UAAU1E,SAxBnB,SAACE,GACpB,IACMyE,EADoBzE,EAAnBC,OAASyE,MACM,GAChBC,EAAS,IAAIC,WAChBH,IACHE,EAAOE,UAAY,SAACC,GAClB,IAAwBC,EAAWD,EAA5BE,cAAiBD,OACxBvB,EAAcuB,IAEhBJ,EAAOM,cAAcR,OAgBnB,uBAAOhE,KAAK,SAASN,MAAM,UAC1BoD,GACC,gCACE,qBAAKR,IAAI,GAAGC,IAAKO,EAAYN,MAAM,OAAOC,OAAO,SACjD,wBAAQvB,QAhBU,kBAAM6B,EAAc,KAgBtC,0BC9BK0B,EA1BF,SAAC,GAAiB,IAAf9B,EAAc,EAAdA,QACd,EAA4B7D,mBAAS,IAArC,mBAAO4F,EAAP,KAAeC,EAAf,KAWA,OATAC,qBAAU,WACRnG,EAAUmF,WAAW,SAASiB,QAAQ,WAAW,QAAQC,YAAW,SAACC,GACrE,IAAMC,EAAaD,EAASE,KAAKC,KAAI,SAACpD,GACpC,OAAO,aAAEC,GAAID,EAAIC,IAAOD,EAAIqD,WAE5BR,EAAUK,QAEX,IAGD,gCACE,cAAC,EAAD,CAAcrC,QAASA,IACvB,8BACG+B,EAAOQ,KAAI,SAACtC,GAAD,OACV,cAAC,EAAD,CAEAxB,SAAUwB,EACVvB,QAASuB,EAAMe,YAAchB,EAAQQ,KAFhCP,EAAMb,aCPNqD,EAbI,SAAC,GAAD,IAAGzC,EAAH,EAAGA,QAAH,OACjB,8BACE,+BACE,6BACE,cAAC,IAAD,CAAMvC,GAAG,QAAT,wCAEF,6BACE,eAAC,IAAD,CAAMA,GAAG,WAAT,UAAqBuC,EAAQ0C,YAA7B,6CC8BOC,EApCC,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,YAAa5C,EAAc,EAAdA,QAC9B,EAA4C7D,mBAAS6D,EAAQ0C,aAA7D,mBAAOG,EAAP,KAAuBC,EAAvB,KACMC,EAAUpG,cAYVK,EAAQ,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,yDACfL,EAAMM,iBACH8C,EAAQ0C,cAAgBG,EAFZ,gCAGP7C,EAAQgD,cAAc,CAC1BN,YAAaG,IAJF,OAMbD,IANa,2CAAH,sDAUd,OACE,qCACE,uBAAM5F,SAAUA,EAAhB,UACE,uBACAN,SAnBW,SAACE,GAChB,IAAkBG,EAAWH,EAArBC,OAAUE,MAClB+F,EAAkB/F,IAiBMA,MAAO8F,EAAgBxF,KAAK,OAAOC,YAAY,iBACnE,uBAAQD,KAAK,SAASN,MAAM,sBAE9B,wBAAQwB,QA3BU,WACpB3C,EAAYqH,UACZF,EAAQG,KAAK,MAyBX,yBCGSC,EA7BM,SAAC,GAA0C,IAAxCP,EAAuC,EAAvCA,YAAaQ,EAA0B,EAA1BA,WAAYpD,EAAc,EAAdA,QAC/C,OACE,eAAC,IAAD,WACGoD,GAAc,cAAC,EAAD,CAAYpD,QAASA,IACpC,cAAC,IAAD,UACGoD,EACD,qCACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,QAAQC,UAAWzB,EAArC,SACE,cAAC,EAAD,CAAM9B,QAASA,MAEjB,cAAC,IAAD,CAAOqD,OAAK,EAACC,KAAK,WAAlB,SACE,cAAC,EAAD,CAASV,YAAaA,EAAa5C,QAASA,SAI9C,qCACE,cAAC,IAAD,CAAOqD,OAAK,EAACC,KAAK,IAAIC,UAAWtF,EAAjC,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOoF,OAAK,EAACC,KAAK,WAAWC,UAAWC,EAAxC,SACE,cAACA,EAAD,e,QCdCC,EAZMC,YAAH,sNACZC,KCEAjG,EAAOC,IAAOiG,KAAV,2FAqDKC,MA9Cf,WACE,MAAwB1H,oBAAS,GAAjC,mBAAO2H,EAAP,KAAaC,EAAb,KACA,EAA8B5H,mBAAS,MAAvC,mBAAO6D,EAAP,KAAgBgE,EAAhB,KA0BA,OAxBA/B,qBAAU,WACRrG,EAAYqI,oBAAmB,SAACC,GAE5BF,EADEE,EACS,CACTxB,YAAawB,EAAKxB,YAClBlC,IAAK0D,EAAK1D,IACVwC,cAAe,SAACmB,GAAD,OAAUD,EAAKlB,cAAcmB,KAGnC,MAEbJ,GAAQ,QAET,IAYD,cAAC,EAAD,UACGD,EACC,qCACA,cAAC,EAAD,IACA,cAAC,EAAD,CACElB,YAfY,WAClB,IAAMsB,EAAOtI,EAAYwI,YACzBJ,EAAW,CACTtB,YAAawB,EAAKxB,YAClBlC,IAAK0D,EAAK1D,IACVwC,cAAe,SAACmB,GAAD,OAAUD,EAAKlB,cAAcmB,OAWxCf,WAAYiB,QAAQrE,GACpBA,QAASA,OAIX,qBChDRsE,IAASC,OACP,eAAC,IAAMC,WAAP,WACE,cAAC,EAAD,IACA,oCAEFC,SAASC,eAAe,W","file":"static/js/main.005f7a16.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\r\n  appId: process.env.REACT_APP_APP_ID\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const firebaseInstance = firebase;\r\nexport const authService = firebase.auth();\r\nexport const dbService = firebase.firestore();\r\nexport const storageService = firebase.storage();","import { authService } from 'fbase';\r\nimport React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport AccountForm from './AccountForm';\r\n\r\nconst AuthForm = () => {\r\n  const [email , setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  const onChange = (event) => {\r\n    const {target: { name, value }} = event;\r\n    if(name === \"email\") {\r\n      setEmail(value);\r\n    } else if(name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  }\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      await authService.createUserWithEmailAndPassword(email, password);\r\n    } catch(error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input \r\n          name=\"email\" \r\n          type=\"text\" \r\n          placeholder=\"이메일\" \r\n          required value={email} \r\n          onChange={onChange}\r\n        />\r\n        <input \r\n          name=\"password\" \r\n          type=\"password\" \r\n          placeholder=\"비밀번호\" \r\n          required value={password} \r\n          onChange={onChange}\r\n        />\r\n        <input type=\"submit\" value=\"계정생성\"/>\r\n        {error ? \"잘못입력했어\" : \"\"}\r\n      </form>\r\n    </>\r\n  )\r\n}\r\nexport default AuthForm;","import { authService } from 'fbase';\r\nimport React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport AccountForm from './AccountForm';\r\n\r\nconst AuthForm = () => {\r\n  const [email , setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  const onChange = (event) => {\r\n    const {target: { name, value }} = event;\r\n    if(name === \"email\") {\r\n      setEmail(value);\r\n    } else if(name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  }\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      /*data = await authService.createUserWithEmailAndPassword(email, password);*/\r\n      await authService.signInWithEmailAndPassword(email, password);\r\n    } catch(error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const onLogin = () => {\r\n    history.push(\"/Home\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input \r\n          name=\"email\" \r\n          type=\"text\" \r\n          placeholder=\"이메일\" \r\n          required value={email} \r\n          onChange={onChange}\r\n        />\r\n        <input \r\n          name=\"password\" \r\n          type=\"password\" \r\n          placeholder=\"비밀번호\" \r\n          required value={password} \r\n          onChange={onChange}\r\n        />\r\n          <input type=\"submit\" value=\"로그인\"></input>\r\n        {error ? \"잘못입력했어\" : \"\"}\r\n      </form>\r\n      <Link to=\"/Account\">계정생성</Link>\r\n    </>\r\n  )\r\n}\r\nexport default AuthForm;","import AuthForm from 'components/AuthForm';\r\nimport { authService, firebaseInstance } from 'fbase';\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Body = styled.div`\r\n  font-size: 13px;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width:500px;\r\n  height: 500px;\r\n  background-color: gold;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Google = styled.button`\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 30px;\r\n  background-color: white;\r\n  border: 0;\r\n  cursor: pointer;\r\n  background-image: url(\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\");\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n`;\r\n\r\nconst GitHub = styled.button`\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 30px;\r\n  background-color: white;\r\n  border: 0;\r\n  cursor: pointer;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n  background-image: url(\"https://upload.wikimedia.org/wikipedia/commons/4/4a/GitHub_Mark.png\");\r\n`;\r\n\r\nconst Auth = () => {\r\n  const onSocialClick = async (event) => {\r\n    const {target : {name} } = event;\r\n    let provider;\r\n    if(name === \"google\") {\r\n      provider = new firebaseInstance.auth.GoogleAuthProvider();\r\n    } else if(name === \"github\") {\r\n      provider = new firebaseInstance.auth.GithubAuthProvider();\r\n    }\r\n    await authService.signInWithPopup(provider);\r\n  };\r\n  \r\n  return (\r\n    <Body>\r\n      <Container>\r\n        <AuthForm />\r\n        <div>\r\n            <Google onClick={onSocialClick} name=\"google\"></Google>\r\n            <GitHub onClick={onSocialClick} name=\"github\"></GitHub>\r\n        </div>\r\n      </Container>\r\n    </Body>\r\n  );\r\n}\r\n\r\n\r\nexport default Auth;","import React, { useState } from \"react\";\r\nimport { dbService, storageService } from \"fbase\";\r\n\r\nconst Nweet = ({ nweetObj, isOwner }) => {\r\n  const [editing, setEditing] = useState(false);\r\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\r\n\r\n  const onDeleteClick = async () => {\r\n    const ok = window.confirm(\"삭제하시겠습니까?\");\r\n    if (ok) {\r\n      await dbService.doc(`nweet/${nweetObj.id}`).delete();\r\n      if(nweetObj.attachmentUrl !== \"\"){\r\n        await storageService.refFromURL(nweetObj.attachmentUrl).delete();\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleEditing = () => setEditing((prev) => !prev);\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    await dbService.doc(`nweet/${nweetObj.id}`).update({\r\n      text: newNweet,\r\n    });\r\n    setEditing(false);\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    const {target: { value } } = event;\r\n    setNewNweet(value);\r\n  };\r\n  \r\n  return (\r\n    <div>\r\n      {editing ? (\r\n        <>\r\n          {isOwner && (\r\n          <>\r\n            <form onSubmit={onSubmit}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Edit your nweet\"\r\n                value={newNweet}\r\n                required\r\n                onChange={onChange}\r\n              />\r\n              <input type=\"submit\" value=\"Update Nweet\" />\r\n            </form>\r\n            <button onClick={toggleEditing}>Cancel</button>\r\n          </>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h4>{nweetObj.text}</h4>\r\n          {nweetObj.attachmentUrl && <img alt=\"\" src={nweetObj.attachmentUrl} width=\"50px\" height=\"50px\"/> }\r\n          {isOwner && (\r\n            <>\r\n              <button onClick={onDeleteClick}>Delete Nweet</button>\r\n              <button onClick={toggleEditing}>Edit Nweet</button>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Nweet;","import { dbService, storageService } from 'fbase';\r\nimport React, { useState } from 'react';\r\nimport {v4 as uuidv4 } from 'uuid';\r\n\r\nconst NweetFactory = ({ userObj }) => {\r\n  const [nweet, setNweet] = useState(\"\");\r\n  const [attachment, setAttachment] = useState(\"\");\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    let attachmentUrl = \"\";\r\n    if(attachment !== \"\") {\r\n      const attachmentRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n      const response = await attachmentRef.putString(attachment, \"data_url\");\r\n      attachmentUrl = await response.ref.getDownloadURL();\r\n    }\r\n  const nweetObj = {\r\n    text: nweet,\r\n    createAt: Date.now(),\r\n    creatorId: userObj.uid,\r\n    attachmentUrl\r\n  }\r\n  await dbService.collection(\"nweet\").add(nweetObj);\r\n  setNweet(\"\");\r\n  setAttachment(\"\");\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    const {target: { value } } = event;\r\n    setNweet(value);\r\n  };\r\n\r\n  const onFileChange = (event) => {\r\n    const {target: {files}} = event;\r\n    const theFile = files[0];\r\n    const reader = new FileReader();\r\n    if(theFile) {\r\n    reader.onloadend = (finishedEvent) => {\r\n      const {currentTarget : {result}} = finishedEvent;\r\n      setAttachment(result);\r\n    };\r\n    reader.readAsDataURL(theFile);\r\n    }\r\n  }\r\n\r\n  const onClearPhotoClick = () => setAttachment(\"\");\r\n\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      <input\r\n        value={nweet}\r\n        onChange={onChange}\r\n        type=\"text\"\r\n        placeholder=\"What's on your mind?\"\r\n        maxLength={120}\r\n      />\r\n      <input type=\"file\" accept=\"image/*\" onChange={onFileChange}/>\r\n      <input type=\"submit\" value=\"Nweet\" />\r\n      {attachment && (\r\n        <div>\r\n          <img alt=\"\" src={attachment} width=\"50px\" height=\"50px\" />\r\n          <button onClick={onClearPhotoClick}>Clear</button>\r\n        </div>\r\n      )}\r\n    </form>\r\n  )\r\n}\r\nexport default NweetFactory;","import React, { useState, useEffect } from \"react\";\r\nimport { dbService } from \"fbase\";\r\nimport Nweet from 'components/Nweet';\r\nimport NweetFactory from \"components/NweetFactory\";\r\n\r\nconst Home = ({ userObj }) => {\r\n  const [nweets, setNweets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dbService.collection(\"nweet\").orderBy(\"createAt\",\"desc\").onSnapshot((snapshot) => {\r\n    const nweetArray = snapshot.docs.map((doc) => {\r\n      return { id: doc.id, ...doc.data() };\r\n    });\r\n      setNweets(nweetArray);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <NweetFactory userObj={userObj} />\r\n      <div>\r\n        {nweets.map((nweet) => (\r\n          <Nweet \r\n          key={nweet.id} \r\n          nweetObj={nweet} \r\n          isOwner={nweet.creatorId === userObj.uid}/>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Home;","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst Navigation = ({ userObj }) => (\r\n  <nav>\r\n    <ul>\r\n      <li>\r\n        <Link to=\"/Home\">자유토크</Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/profile\">{userObj.displayName}님의 프로필</Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default Navigation;","import { authService } from 'fbase';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Profile = ({ refreshUser, userObj }) => {\r\n  const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\r\n  const history = useHistory();\r\n\r\n  const onLogOutClick = () => {\r\n    authService.signOut();\r\n    history.push(\"/\");\r\n  };\r\n\r\n  const onChange = (event) => {\r\n    const { target : {value} } = event;\r\n    setNewDisplayName(value);\r\n  }\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if(userObj.displayName !== newDisplayName){\r\n      await userObj.updateProfile({\r\n        displayName: newDisplayName,\r\n      });\r\n      refreshUser();\r\n    }\r\n  }\r\n\r\n  return(\r\n    <>\r\n      <form onSubmit={onSubmit} >\r\n        <input \r\n        onChange={onChange} value={newDisplayName} type=\"text\" placeholder=\"Display name\" />\r\n        <input  type=\"submit\" value=\"Update Profile\" />\r\n      </form>\r\n      <button onClick={onLogOutClick}>Log Out</button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Auth from 'routes/Auth';\r\nimport Home from 'routes/Home';\r\nimport Navigation from \"components/Navigation\";\r\nimport Profile from 'routes/Profile';\r\nimport AccountForm from './AccountForm';\r\n\r\n\r\nconst RouterHandle = ({ refreshUser, isLoggedIn, userObj }) => {\r\n  return (\r\n    <Router>\r\n      {isLoggedIn && <Navigation userObj={userObj}/>}\r\n      <Switch>\r\n        {isLoggedIn ? (\r\n        <>\r\n          <Route exact path=\"/Home\" component={Home}>\r\n            <Home userObj={userObj}/>\r\n          </Route>\r\n          <Route exact path=\"/profile\">\r\n            <Profile refreshUser={refreshUser} userObj={userObj}/>\r\n          </Route>\r\n        </>\r\n        ) : (\r\n          <>\r\n            <Route exact path=\"/\" component={Auth}>\r\n              <Auth/>\r\n            </Route>\r\n            <Route exact path=\"/Account\" component={AccountForm}>\r\n              <AccountForm/>\r\n            </Route>\r\n          </>\r\n        )}\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default RouterHandle;","import { createGlobalStyle } from \"styled-components\";\r\nimport reset from \"styled-reset\";\r\n\r\nconst GlobalStyles = createGlobalStyle`\r\n    ${reset};\r\n\r\n    body{\r\n        width: 100%;\r\n        height: 100vh;\r\n        font-size: 20px;\r\n        background-color: yellow;\r\n        font-family: 'Noto Sans KR', sans-serif;\r\n    }\r\n`;\r\n\r\nexport default GlobalStyles;","import React, { useState, useEffect } from \"react\";\nimport AppRouter from \"components/Router\";\nimport { authService } from \"fbase\";\nimport GlobalStyles from \"./GlobalStyles\";\nimport styled from \"styled-components\";\n\nconst Body = styled.body`\n  width: 100%;\n  height: 100vh;\n  padding: 0;\n  margin: 0;\n`;\n\nfunction App() {\n  const [init, setInit] = useState(false);\n  const [userObj, setUserObj] = useState(null);\n\n  useEffect(() => {\n    authService.onAuthStateChanged((user) => {\n      if (user) {\n        setUserObj({\n          displayName: user.displayName,\n          uid: user.uid,\n          updateProfile: (args) => user.updateProfile(args),\n        });\n      } else {\n        setUserObj(null);\n      }\n      setInit(true);\n    });\n  }, []);\n\n  const refreshUser = () => {\n    const user = authService.currentUser;\n    setUserObj({\n      displayName: user.displayName,\n      uid: user.uid,\n      updateProfile: (args) => user.updateProfile(args),\n    });\n  };\n  \n  return (\n    <Body>\n      {init ? (\n        <>\n        <GlobalStyles />\n        <AppRouter\n          refreshUser={refreshUser}\n          isLoggedIn={Boolean(userObj)}\n          userObj={userObj}\n        />\n        </>\n      ) : (\n        \"Initializing...\"\n      )}\n    </Body>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport globalStyles from 'components/GlobalStyles';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n    <globalStyles />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}